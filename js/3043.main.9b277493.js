"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3043],{70196:function(e,t,n){var r,a=n(789062),c=n(115861),o=n(193324),i=n(618446),l=n.n(i),u=n(667294),s=n(532701),f=n(810684),m=n(294184),p=n.n(m),d=n(403887),h=n(536183),g=n(759438),v=n(104390),y=n(414070),Z=n(715887),E=n(62069),I=n(760546),S=n(221581),x=n(136998),b=n(538865),C=n(878927),R=n(774756),k=n(487e3);!function(e){e.user="user",e.online="online",e.search="search"}(r||(r={}));var P=u.memo((function(e){var t=e.imagesSource,n=e.isOpen,i=e.onCancel,m=e.placeName,P=e.onSelectImage,w=e.initialSelectedImageKey,_=(0,E.dh)(),M=(0,u.useState)(_&&_.tripPlanType===b.u.recommendations&&N(_.tripPlanKey)?r.user:r.online),U=(0,o.Z)(M,2),T=U[0],O=U[1],F=(0,k.Cq)((0,R.U)((0,c.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D.current=t,e.t0=t.type,e.next=e.t0===x.T.googlePlace?4:e.t0===x.T.geoId?5:8;break;case 4:return e.abrupt("return",(0,v.jU)(t.googlePlace));case 5:if(null!==t.geoId){e.next=7;break}return e.abrupt("return",[]);case 7:return e.abrupt("return",(0,v.h0)(t.geoId));case 8:throw(0,C.j)(t);case 9:case"end":return e.stop()}}),e)}))),[t])),K=F.state,B=F.call,D=(0,u.useRef)(null);(0,u.useEffect)((function(){n&&!l()(t,D.current)&&(D.current=t,B())}),[t,n,B]);var j=(0,u.useRef)(null);(0,u.useEffect)((function(){!j.current&&n&&(j.current=n,O((null==_?void 0:_.tripPlanType)===b.u.recommendations?r.user:r.online))}),[null==_?void 0:_.tripPlanType,n]);var G=(0,u.useMemo)((function(){return"done"===(null==K?void 0:K.status)?K.result.map((function(e){return(0,d.iO)({key:e,size:"small"})})):[]}),[K]),V=(0,u.useMemo)((function(){return G}),[G]),q=(0,u.useMemo)((function(){return(null==_?void 0:_.tripPlanKey)||null}),[null==_?void 0:_.tripPlanKey]),L=(0,R.U)(function(){var t=(0,c.Z)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D.current=null,t.abrupt("return",e.onSelectNewOnlineImage(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),A=(0,u.useMemo)((function(){return[].concat((0,a.Z)(N(q)?[{value:r.user,label:"Your photos"}]:[]),[{value:r.online,label:"Select photos"},{value:r.search,label:"Search web"}])}),[q]);return u.createElement(Z.Z,{isOpen:n,toggle:i,size:"xl",returnFocusAfterClose:!1,isAutomaticallyTriggered:!1},u.createElement(s.Z,{toggle:i},"Change photo"),u.createElement(f.Z,null,u.createElement("div",{style:{marginTop:"-16px"}},u.createElement(h.Z,{tabs:A,value:T,onChange:O})),N(q)&&u.createElement("div",{className:p()("mt-2",{"d-none":T!==r.user})},u.createElement(I.Z,{isOpen:n,tripPlanKey:q,initialSelectedImageKey:w,onSelectImage:P})),u.createElement("div",{className:p()("mt-2",{"d-none":T!==r.online})},K&&"inProgress"!==(null==K?void 0:K.status)?"error"===(null==K?void 0:K.status)?u.createElement("div",{className:"alert alert-danger"},K.error):u.createElement(S.Z,{imageUrls:V,imageKeys:K.result,initialSelectedImageKey:w,onSelectImage:P,imagesSource:t}):u.createElement(y.Z,null)),u.createElement("div",{className:p()("pt-4",{"d-none":T!==r.search})},u.createElement(g.Z,{initialQuery:m,onSelectImage:L}))))}));function N(e){return!!e}t.Z=P},11058:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(215671),a=n(143144),c=n(360136),o=n(182963),i=n(661120),l=n(667294),u=n(130845),s=n(847680),f=n(496408),m=n(446830),p=n(414070),d=n(497309);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var g=function(e){(0,c.Z)(n,e);var t=h(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={selectedIndex:0},e.getImages=(0,u.Z)((function(e){return e.map((function(e){return{url:e.extraData.thumbnailUrl,externalLinkUrl:e.extraData.pageUrl}}))})),e.images=function(){return e.getImages(e.props.images||[])},e.handleSelect=function(t,n){var r=e.props,a=r.images,c=r.onImageSelect;a&&(e.setState({selectedIndex:n}),t&&c(a[n]))},e.handleSubmit=function(){var t=e.props,n=t.images,r=t.onImageSelect;n&&r(n[e.state.selectedIndex])},e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.initialQuery,n=e.loading,r=e.images,a=e.response,c=e.onSearch,o=e.saving,i=this.state.selectedIndex;return l.createElement("div",null,l.createElement(f.Z,{initialQuery:t,onSubmit:c}),a&&l.createElement("div",{className:"mt-2"},l.createElement(m.Z,{response:a})),n&&l.createElement("div",{className:"mt-4"},l.createElement(p.Z,null)),r&&l.createElement("div",{className:"mt-2"},r.length>0?l.createElement(l.Fragment,null,l.createElement("div",{className:"alert alert-warning mb-0"},"Before selecting an image, click through and verify that you have the right to use the listed images."),l.createElement(d.Z,{allowEmpty:!1,images:this.images(),selectedIndex:i,onSelect:(0,s.RE)(this,"handleSelect",[!1]),onDoubleClick:(0,s.RE)(this,"handleSelect",[!0]),loading:o})):l.createElement(m.Z,{color:"info",response:v})))}}]),n}(l.PureComponent);g.displayName="ImageSearch";var v={success:!1,messages:["We could not find any image search results that matched your search"],errTypes:["noMatchingImages"]}},429788:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(215671),a=n(143144),c=n(360136),o=n(182963),i=n(661120),l=n(667294),u=n(95337),s=n(996684),f=n(14019);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var p=function(e){(0,c.Z)(n,e);var t=m(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).handleQueryChange=function(t){e.props.onQueryChange(t.currentTarget.value)},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit()},e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props.query;return l.createElement("form",{onSubmit:this.handleSubmit},l.createElement("div",{className:"d-flex"},l.createElement("div",{className:"flex-grow-1"},l.createElement("label",{htmlFor:"ImageSearch__query",className:"sr-only"},"Search for images"),l.createElement(f.Z,{type:"text",id:"ImageSearch__query",className:"form-control",value:e,onChange:this.handleQueryChange,placeholder:"Search for images on the web",autoComplete:"off"})),l.createElement("div",{className:"ml-2"},l.createElement("button",{className:"btn btn-primary",type:"submit"},l.createElement(s.Z,{icon:u.wn})))))}}]),n}(l.PureComponent);p.displayName="ImageSearchForm"},496408:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(215671),a=n(143144),c=n(360136),o=n(182963),i=n(661120),l=n(667294),u=n(847680),s=n(429788);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var m=function(e){(0,c.Z)(n,e);var t=f(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).handleSubmit=function(){a.props.onSubmit(a.state.query)},a.state={query:e.initialQuery||""},a}return(0,a.Z)(n,[{key:"componentDidUpdate",value:function(e){e.initialQuery!==this.props.initialQuery&&this.setState({query:this.props.initialQuery||""})}},{key:"render",value:function(){var e=this.state.query;return l.createElement(s.Z,{query:e,onQueryChange:(0,u.Vx)(this,"query"),onSubmit:this.handleSubmit})}}]),n}(l.PureComponent);m.displayName="ImageSearchFormUncontrolled"},759438:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(115861),a=n(215671),c=n(143144),o=n(497326),i=n(360136),l=n(182963),u=n(661120),s=n(130845),f=n(667294),m=n(321043),p=n(104390),d=n(11058);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var g=function(e){(0,i.Z)(n,e);var t=h(n);function n(){var e;(0,a.Z)(this,n);for(var c=arguments.length,i=new Array(c),l=0;l<c;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1,images:null,response:null,saving:!1},e.handleSearch=function(){var t=(0,r.Z)(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0,response:null}),t.prev=1,t.next=4,(0,p.Gl)(n);case 4:r=t.sent,e.setState({loading:!1,images:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),(0,m.l3)((0,o.Z)(e),"response","loading")(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.getImageUrls=(0,s.Z)((function(e){return e.map((function(e){return e.extraData.thumbnailUrl}))})),e.imageUrls=function(){return e.getImageUrls(e.state.images||[])},e.handleImageSelect=function(){var t=(0,r.Z)(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.onSelectImage,e.setState({saving:!0,response:null}),t.prev=2,t.next=5,r(n);case 5:e.setState({saving:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),(0,m.l3)((0,o.Z)(e),"response","saving")(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),e}return(0,c.Z)(n,[{key:"render",value:function(){var e=this.props.initialQuery,t=this.state,n=t.loading,r=t.images,a=t.response,c=t.saving;return f.createElement(d.Z,{initialQuery:e,loading:n,images:r,response:a,onImageSelect:this.handleImageSelect,onSearch:this.handleSearch,saving:c})}}]),n}(f.PureComponent);g.displayName="ImageSearchUncontrolled"},424667:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(215671),a=n(143144),c=n(360136),o=n(182963),i=n(661120),l=n(667294),u=n(797733),s=n(821830),f=n(925596),m=n(996684),p=n(546922),d=n(950250),h=n(55977),g=(n(816429),n(562237));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var y=function(e){(0,c.Z)(n,e);var t=v(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.src,n=e.externalLinkUrl,r=e.text,a=e.faIcon,c=e.selected,o=e.loading,i=e.onClick,v=e.onDoubleClick;return l.createElement("div",{className:"col-6 col-lg-4 ImageSelectCard__button"},l.createElement(s.Z,{src:t,aspectRatio:"5-3",selected:c,onClick:i,clickEvent:null,onDoubleClick:v,loading:o,rounded:!0},r&&l.createElement("div",{className:"d-flex h-100  text-muted align-items-center justify-content-center"},a&&l.createElement(m.Z,{icon:a,className:"mr-2"}),l.createElement("div",{className:"font-weight-bold"},r))),c&&l.createElement("div",{className:"ImageSelectCard__overlay"},n&&l.createElement(g.Z,{className:"ImageSelectCard__externalLink",href:n,clickEvent:d.j.clickImageSelectCardExternalLink},l.createElement(m.Z,{icon:u.Xj,size:"lg"}),l.createElement("span",{className:"sr-only"},"Open external link")),l.createElement(p.ZP,{color:"primary",label:l.createElement("span",null,"Select ",o&&l.createElement(f.Z,null)),onClick:v,disabled:o,clickEvent:d.j.clickImageSelectCard,size:h.q.mdLg,className:"ml-auto"})))}}]),n}(l.PureComponent);y.displayName="ImageSelectCard"},82543:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(215671),a=n(143144),c=n(360136),o=n(182963),i=n(661120),l=n(667294),u=n(702723),s=n(424667),f=n(14019);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var p=function(e){(0,c.Z)(n,e);var t=m(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).uploadInputRef=l.createRef(),e.handleUploadClick=function(){setTimeout((function(){var t=e.uploadInputRef.current;t&&t.click()}),0)},e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props.onFileSelect;return l.createElement(l.Fragment,null,l.createElement(f.Z,{innerRef:this.uploadInputRef,type:"file",id:"uploadImageButton",onChange:e,className:"d-none",accept:"image/*"}),l.createElement(s.Z,{text:"Upload photo",faIcon:u.cf,selected:!1,onClick:this.handleUploadClick,onDoubleClick:this.handleUploadClick}))}}]),n}(l.PureComponent);p.displayName="ImageUploadCard"},739611:function(e,t,n){n.d(t,{Z:function(){return Z}});var r,a=n(215671),c=n(143144),o=n(360136),i=n(182963),l=n(661120),u=n(667294),s=n(290436),f=n(206811),m=n(820702),p=n(85124),d=n(996684),h=n(268184),g=(n(525291),n(878927));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}!function(e){e.uploading="uploading",e.completed="completed",e.error="error"}(r||(r={}));var y={[r.uploading]:"primary",[r.completed]:"success",[r.error]:"danger"},Z=function(e){(0,o.Z)(n,e);var t=v(n);function n(){var e;(0,a.Z)(this,n);for(var c=arguments.length,o=new Array(c),i=0;i<c;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderIcon=function(e){switch(e){case r.completed:return u.createElement("span",{className:"text-success"},u.createElement(d.Z,{icon:f.f8}));case r.error:return u.createElement("span",{className:"text-danger"},u.createElement(d.Z,{icon:m.RL}));case r.uploading:return u.createElement(d.Z,{icon:p.Y9});default:throw(0,g.j)(e)}},e.renderMessage=function(t){var n=e.props,a=n.value,c=n.error,o=a.toFixed(1);switch(t){case r.completed:return u.createElement("div",{className:"text-success"},"Upload successful");case r.error:return c&&u.createElement("div",{className:"text-danger"},c.messages);case r.uploading:return u.createElement("div",{className:"text-primary"},o,"% uploaded");default:throw(0,g.j)(t)}},e}return(0,c.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.fileName,a=e.error,c=r.uploading;return a?c=r.error:100===t&&(c=r.completed),u.createElement("div",{className:"col-6 col-lg-4 ImageUploadingCard"},u.createElement("div",{className:"ImageUploadingCard__card"},u.createElement(h.Z,{aspectRatio:"5-3"},u.createElement("div",{className:"d-flex flex-column h-100 w-100 align-items-center justify-content-center"},u.createElement("div",{className:"ImageUploadingCard__fileName text-muted"},this.renderIcon(c),u.createElement("span",{className:"ml-2"},n)),u.createElement(s.Z,{value:t,color:y[c],className:"ImageUploadingCard__progressBar my-1"}),u.createElement("div",{className:"ImageUploadingCard__message"},u.createElement("small",{className:"font-weight-bold"},this.renderMessage(c)))))))}}]),n}(u.PureComponent);Z.displayName="ImageUploadingCard"},497309:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(215671),a=n(143144),c=n(360136),o=n(182963),i=n(661120),l=n(667294),u=n(847680),s=n(424667);n(181464);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var m=function(e){(0,c.Z)(n,e);var t=f(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.images,n=e.allowEmpty,r=e.selectedIndex,a=e.loading,c=this;return l.createElement("div",{className:"row ImagesSelect__row"},t.map((function(e,t){var n,o;return"string"==typeof e?(n=e,o=void 0):(n=e.url,o=e.externalLinkUrl||void 0),l.createElement(s.Z,{key:n,src:n,externalLinkUrl:o,selected:r===t,onClick:(0,u.cR)(c,"onSelect",[t]),onDoubleClick:(0,u.cR)(c,"onDoubleClick",[t]),loading:r===t&&a})})),this.props.children,n&&l.createElement(s.Z,{text:"Don't show an image",selected:null==r,onClick:(0,u.cR)(this,"onSelect",[null]),onDoubleClick:(0,u.cR)(this,"onDoubleClick",[null]),loading:null==r&&a}))}}]),n}(l.PureComponent);m.displayName="ImagesSelect"},221581:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(215671),a=n(143144),c=n(360136),o=n(182963),i=n(661120),l=n(667294),u=n(497309),s=n(104390),f=n(136998),m=n(878927);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var d=function(e){(0,c.Z)(n,e);var t=p(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).handleImageSelect=function(e){var t=a.props.imageKeys,n=null!=e?t[e]:null;return a.setState({selectedImageKey:n}),n},a.handleImageDoubleClick=function(e){var t=a.props.imagesSource,n=a.handleImageSelect(e);if(null!==n)switch(t.type){case f.T.geoId:(0,s.rk)(t.geoId,n);break;case f.T.googlePlace:(0,s.Jp)(t.googlePlace.place_id,n);break;default:throw(0,m.j)(t)}a.props.onSelectImage(n)},a.state={selectedImageKey:e.initialSelectedImageKey},a}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.imageUrls,n=e.imageKeys,r=this.state.selectedImageKey;return l.createElement(u.Z,{allowEmpty:!0,images:t,selectedIndex:r?n.findIndex((function(e){return e===r})):null,onSelect:this.handleImageSelect,onDoubleClick:this.handleImageDoubleClick})}}]),n}(l.PureComponent);d.displayName="OnlineImagesSelect"},760546:function(e,t,n){var r,a=n(789062),c=n(115861),o=n(215671),i=n(143144),l=n(360136),u=n(182963),s=n(661120),f=n(618446),m=n.n(f),p=n(667294),d=n(380955),h=n(130845),g=n(702723),v=n(497309),y=n(82543),Z=n(337144),E=n(739611),I=n(79068),S=n(414070),x=n(403887),b=n(244998),C=n(291843),R=n(321043),k=n(950250),P=n(601389);n(705775);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var w=(0,d.Pi)(r=function(e){(0,l.Z)(r,e);var t,n=N(r);function r(e){var t;return(0,o.Z)(this,r),(t=n.call(this,e)).lastFetchedTripPlanKey=null,t.handleImageUpload=function(){var e=(0,c.Z)(regeneratorRuntime.mark((function e(n){var r,c,o,i,l,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props,c=r.auth.user,o=r.tripPlanKey,i=t.state.imageKeys,l=n.currentTarget.files,!(c&&c.id&&l&&l.length>0)){e.next=17;break}return u=l[0],s=null,t.setState({uploadingProgress:0,uploadingImage:u}),e.prev=7,e.next=10,(0,I.mA)(o,u,t.handleUpdateProgressBar);case 10:s=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),t.setState({error:(0,R.Vx)(e.t0)});case 16:setTimeout((function(){if(s){var e=s.FreeImage.key;t.setState({selectedImageKey:e,imageKeys:[].concat((0,a.Z)(i),[e])})}t.setState({uploadingImage:null,uploadingProgress:0})}),200);case 17:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t){return e.apply(this,arguments)}}(),t.handleUpdateProgressBar=function(e){if(e.lengthComputable){var n=e.loaded/e.total*100;t.setState({uploadingProgress:n})}},t.handleImageSelect=function(e){var n=t.state.imageKeys,r=null!=e?n[e]:null;return t.setState({selectedImageKey:r}),r},t.handleImageDoubleClick=function(e){var n=t.handleImageSelect(e);t.props.onSelectImage(n)},t.getFreeImageUrls=(0,h.Z)((function(e){return e.map((function(e){return(0,x.iO)({key:e,size:"small"})}))})),t.imageUrls=function(){return t.getFreeImageUrls(t.state.imageKeys)},t.state={imageKeys:[],selectedImageKey:e.initialSelectedImageKey,uploadingProgress:0,uploadingImage:null,loading:!1,error:null},t}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){this.maybeLoadTripPlanImageKeys()}},{key:"componentDidUpdate",value:function(){this.maybeLoadTripPlanImageKeys()}},{key:"maybeLoadTripPlanImageKeys",value:(t=(0,c.Z)(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.tripPlanKey,t.isOpen&&!m()(n,this.lastFetchedTripPlanKey)){e.next=3;break}return e.abrupt("return");case 3:return this.lastFetchedTripPlanKey=n,this.setState({loading:!0,imageKeys:[]}),e.prev=5,e.next=8,(0,I.Rc)(n);case 8:r=e.sent,this.setState({loading:!1,imageKeys:r}),e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(5),this.setState({loading:!1,error:(0,R.Vx)(e.t0)}),e.t0;case 16:case"end":return e.stop()}}),e,this,[[5,12]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.imageKeys,n=e.uploadingImage,r=e.uploadingProgress,a=e.loading,c=e.error,o=this.state.selectedImageKey,i=this.imageUrls();return a?p.createElement(S.Z,null):i.length>0||n?p.createElement(v.Z,{allowEmpty:!0,images:i,selectedIndex:o?t.findIndex((function(e){return e===o})):null,onSelect:this.handleImageSelect,onDoubleClick:this.handleImageDoubleClick},n?p.createElement(E.Z,{value:r,fileName:n.name,error:c}):p.createElement(y.Z,{onFileSelect:this.handleImageUpload})):p.createElement("div",{className:"text-center mt-4"},p.createElement(C.Z,{src:"/assets/ImagesUpload__illustration.png",className:"TripPlanImagesSelect__illustration mb-2",alt:"Upload illustration"}),p.createElement(b.Z,{tag:"h3",className:"my-4"},"Upload your photos"),p.createElement("div",{className:"w-50 m-auto"},p.createElement("div",{className:"text-muted text-center mt-4 mb-4"},"You haven't uploaded any photos"),p.createElement(P.Z,{onFileSelect:this.handleImageUpload,faIcon:g.cf,label:"Upload your photos",color:"primary",layout:"block",labelTextClassName:"mr-0",clickEvent:k.j.clickImageUpload,accept:P.G.image})))}}]),r}(p.PureComponent))||r;w.displayName="TripPlanImagesSelect",t.Z=(0,Z.fm)(w)},601389:function(e,t,n){n.d(t,{G:function(){return r}});var r,a=n(487462),c=n(145987),o=n(789062),i=n(667294),l=n(546922),u=n(14019),s=n(503865),f=n(774756),m=n(782107),p=["onFileSelect","accept"];!function(e){e.image="image",e.attachment="attachment",e.gif="gif"}(r||(r={}));var d={[r.image]:(0,o.Z)(s.pg).join(","),[r.attachment]:(0,o.Z)(s.Vk).join(","),[r.gif]:m.so.MIME_GIF},h=i.memo((function(e){var t=e.onFileSelect,n=e.accept,r=(0,c.Z)(e,p),o=(0,i.useRef)(null),s=(0,f.U)((function(){setTimeout((function(){var e=o.current;e&&e.click()}),0)}),[]),m=(0,f.U)((function(e){e.stopPropagation()}),[]),h=n in d?d[n]:n;return i.createElement(i.Fragment,null,i.createElement(u.Z,{innerRef:o,type:"file",id:"uploadImageButton",onChange:t,className:"d-none",accept:h,onClick:m}),i.createElement(l.ZP,(0,a.Z)({},r,{onClick:s})))}));t.Z=h},536183:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(215671),a=n(143144),c=n(360136),o=n(182963),i=n(661120),l=n(667294),u=n(847680),s=n(294184),f=n.n(s);n(200338);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var p=function(e){(0,c.Z)(n,e);var t=m(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.tabs,r=t.displayStyle,a=t.value,c=t.disabledTabs,o=t.centered,i=t.noWrap,s=t.navItemClassName,m="";m=this.props.className?this.props.className:f()("nav mx-n2",{Tabs__tab:"tabs"===r||"vertical"===r||!r,"flex-column":"mobile"===r||"vertical"===r,"nav-tabs Tabs__tripGuide":"tripGuide"===r,"d-flex flex-grow-1 justify-content-center":o,"d-flex flex-nowrap":i});var p="mobile"===r;return l.createElement("ul",{className:m,role:"navigation"},n.map((function(t,n){var o=t.value,m=t.label,d=c&&-1!==c.indexOf(o),h="";return a===o?h="active":d&&(h="disabled"),l.createElement("li",{key:JSON.stringify(o),className:f()("nav-item mx-2",s,{"d-inline-flex":"vertical"===r,"flex-grow-0":i}),"data-tab":o},l.createElement("a",{href:"#tab".concat(n),onClick:d?u.PF:(0,u.cR)(e,"onChange",[o],!0),className:f()("nav-link ".concat(h),{Tabs__mobile:p,"px-0":"vertical"===r})},m))})))}}]),n}(l.PureComponent);p.displayName="Tabs"},257538:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(215671),a=n(143144),c=n(360136),o=n(182963),i=n(661120),l=n(667294),u=n(294184),s=n.n(u);n(972942);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var m=function(e){(0,c.Z)(n,e);var t=f(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.isSidebarOpen,a=e.innerClassName,c=e.sidebarClassName,o=e.addNavSidebarExpandedStyle,i=e.sidebarContents;return l.createElement("div",{className:"d-flex flex-row-reverse w-100 EditorContainer__printable"},l.createElement("div",{className:s()("d-print-none",{EditorContainer__sidebarSpacer:null!==r,EditorContainer__sidebarOpen:r,EditorContainer__sidebarOpenAndNavSidebarExpanded:r&&o},c)},i),l.createElement("div",{className:s()("EditorContainer",n)},l.createElement("div",{className:s()("EditorContainer__inner",a)},t)))}}]),n}(l.PureComponent);m.displayName="EditorContainer"},556263:function(e,t,n){n.d(t,{C:function(){return v},Z:function(){return h}});var r=n(215671),a=n(143144),c=n(360136),o=n(182963),i=n(661120),l=n(667294),u=n(294184),s=n.n(u),f=n(257538),m=n(152433),p=n(834453);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var h=function(e){(0,c.Z)(n,e);var t=d(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.noPadding,r=e.isSidebarOpen,a=e.className,c=e.outerClassName,o=e.editorContainerClassName,i=e.sidebarContents;return l.createElement(f.Z,{isSidebarOpen:r,innerClassName:c,className:s()("position-relative",o),sidebarContents:i},n?l.createElement("div",{className:a},t):l.createElement(p.Z,{className:a},t))}}]),n}(l.PureComponent);h.displayName="PlanViewPageContainer";var g=Math.round((m.q.small.width+m.q.medium.width)/2),v=["(-webkit-min-device-pixel-ratio: 2) 50vw","(-webkit-min-device-pixel-ratio: 3) 33.33vw","(max-width: ".concat(g,"px) ").concat(m.q.small.width,"px"),"".concat(m.q.medium.width,"px")].join(", ")},834453:function(e,t,n){n.d(t,{r:function(){return c}});var r=n(667294),a=(n(523600),r.memo((function(e){var t=e.className,n=e.children;return r.createElement("div",{className:"".concat(c," ").concat(t||"")},n)}))),c="PlanViewPageContainerPad";t.Z=a},104390:function(e,t,n){n.d(t,{Gl:function(){return s},Jp:function(){return g},h0:function(){return l},jU:function(){return o},kr:function(){return m},kv:function(){return d},rk:function(){return y}});var r=n(115861),a=n(879628),c=n(321043);function o(e){return i.apply(this,arguments)}function i(){return(i=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.V1)({method:"POST",url:"/api/placePhotos/".concat(t.place_id),data:{place:t}});case 2:return n=e.sent,e.abrupt("return",(0,c.Ff)(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.V1)({method:"GET",url:"/api/placePhotos/geo/".concat(t)});case 2:return n=e.sent,e.abrupt("return",(0,c.Ff)(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.V1)({method:"GET",url:"/api/placePhotos/search/".concat(encodeURIComponent(t))});case 2:return n=e.sent,e.abrupt("return",(0,c.Ff)(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.V1)({method:"POST",url:"/api/placePhotos/add/".concat(t),data:{image:n}});case 2:return r=e.sent,e.abrupt("return",(0,c.Ff)(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.V1)({method:"POST",url:"/api/placePhotos/add/geo/".concat(t),data:{image:n}});case 2:return r=e.sent,e.abrupt("return",(0,c.Ff)(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.V1)({method:"POST",url:"/api/placePhotos/recordSelect/".concat(t,"/").concat(n)});case 2:return r=e.sent,e.abrupt("return",(0,c.Ff)(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.V1)({method:"POST",url:"/api/placePhotos/recordSelect/geo/".concat(t,"/").concat(n)});case 2:return r=e.sent,e.abrupt("return",(0,c.Ff)(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},503865:function(e,t,n){n.d(t,{QI:function(){return u},VS:function(){return l},Vk:function(){return i},pg:function(){return o}});var r=n(789062),a=n(997824),c=n(782107),o=(new Set(Object.values(c.fC)),new Set(Object.values(c.so))),i=new Set([].concat((0,r.Z)(Object.values(c.so)),(0,r.Z)(Object.values(c.fC))));new Set((0,a.T)({[c.so.MIME_JPEG]:0,[c.so.MIME_PNG]:0,[c.so.MIME_GIF]:0})),(0,a.T)({[c.so.MIME_JPEG]:0,[c.so.MIME_PNG]:0,[c.so.MIME_GIF]:0,[c.fC.MIME_TXT]:0,[c.fC.MIME_CSV]:0,[c.fC.MIME_DOC]:0,[c.fC.MIME_DOCX]:0,[c.fC.MIME_PDF]:0,[c.fC.MIME_PPT]:0,[c.fC.MIME_PPTX]:0,[c.fC.MIME_ICS]:0});function l(e){return"string"==typeof e&&i.has(e)}function u(e){return o.has(e)}},152433:function(e,t,n){n.d(t,{q:function(){return r}});var r={large:{size:"large",mode:"fit",width:1920,height:1080},medium:{size:"medium",mode:"overflow",width:800,height:800},small:{size:"small",mode:"overflow",width:400,height:400},160:{size:"160",mode:"overflow",width:160,height:160},80:{size:"80",mode:"overflow",width:80,height:80}}},782107:function(e,t,n){var r,a,c;function o(e){return"image/jpg"===e?c.MIME_JPEG:e}n.d(t,{Vq:function(){return o},fC:function(){return a},sf:function(){return r},so:function(){return c}}),function(e){e.email="email",e.file="file"}(r||(r={})),function(e){e.MIME_TXT="text/plain",e.MIME_CSV="text/csv",e.MIME_DOC="application/msword",e.MIME_DOCX="application/vnd.openxmlformats-officedocument.wordprocessingml.document",e.MIME_PDF="application/pdf",e.MIME_PPT="application/vnd.ms-powerpoint",e.MIME_PPTX="application/vnd.openxmlformats-officedocument.presentationml.presentation",e.MIME_ICS="text/calendar"}(a||(a={})),function(e){e.MIME_JPEG="image/jpeg",e.MIME_PNG="image/png",e.MIME_WEBP="image/webp",e.MIME_AVIF="image/avif",e.MIME_TIFF="image/tiff",e.MIME_GIF="image/gif",e.MIME_SVG="image/svg+xml"}(c||(c={}))},136998:function(e,t,n){var r;n.d(t,{T:function(){return r}}),function(e){e.geoId="geoId",e.googlePlace="googlePlace"}(r||(r={}))},406524:function(e,t,n){n.d(t,{Q:function(){return i}});var r=n(667294),a=n(299869),c=n(832241),o=n(597894);function i(){var e=(0,o.dr)().timePreference,t=(0,r.useCallback)((function(t){return(0,a.c)({timeFormat:t,timePreference:e})}),[e]),n=(0,r.useCallback)((function(t){return(0,c.J)(t,e)}),[e]);return(0,r.useMemo)((function(){return{formatTime:n,getTimeFormatString:t}}),[n,t])}},972942:function(){},816429:function(){},525291:function(){},181464:function(){},523600:function(){},200338:function(){},705775:function(){}}]);