"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3883],{276163:function(e,t,n){n.d(t,{H:function(){return r},Z:function(){return i}});var r="Deselect__doNotDeselect";function i(e){for(var t=e.target;t;){if(t.classList.contains(r))return!1;t=t.parentElement}return!0}},542755:function(e,t,n){var r=n(667294),i=n(546922),o=n(55977),a=(n(646054),n(285759)),c={gray:"light-gray",indigo:"indigo"},l=r.memo((function(e){var t=e.money,n=e.color,l=e.onClick,u=e.clickEvent;return r.createElement(i.ZP,{clickEvent:u,onClick:l,size:o.q.sm,color:c[n],inline:!0,labelClassName:"px-2",borderRadius:"extremeRounding",label:(0,a.lb)(t)})}));t.Z=l},936790:function(e,t,n){var r=n(487462),i=n(667294),o=n(546922),a=(n(688088),n(897123)),c=i.memo((function(e){return i.createElement(a.Z,{className:"FloatingBottomButton d-flex justify-content-center"},i.createElement(o.ZP,(0,r.Z)({color:"dark"},e)))}));t.Z=c},222123:function(e,t,n){var r=n(193324),i=n(667294),o=n(294184),a=n.n(o),c=n(956228),l=n(862056),u=n(271343),s=n(873012),f=n(841434),d=n(606677),p=(n(181750),i.memo((function(e){var t=e.isOpen,n=e.isNavSidebarExpanded,o=e.children,p=(0,i.useState)(!1),h=(0,r.Z)(p,2),v=h[0],m=h[1];(0,i.useEffect)((function(){return m(!0)}),[]);var y=(0,c.J3)(),g=(0,u.M)(),b=g.safariBottomBarVisible,k=g.iPhoneXBottomBarVisible,x=y&&(0,l.Q_)(y),Z=x||t,w=!x&&t;return(0,d.L)(w),i.createElement("div",{className:a()("FixedPlanSidebar d-print-none",{FixedPlanSidebar__mounted:v,out:!Z,FixedPlanSidebar__safariBottomHidden:!b,FixedPlanSidebar__iPhoneXBottomHidden:!k,FixedPlanSidebar__navSidebarExpanded:n})},i.createElement(s.Z,null,i.createElement(f.Z,null,i.createElement("div",{className:"FixedPlanSidebar__shadow"}),o)))})));t.Z=p},26645:function(e,t,n){var r=n(667294),i=n(422840),o=n(950250),a=n(936790),c=n(55977),l=r.memo((function(e){var t=e.onClick;return r.createElement(a.Z,{faIcon:i.tL,label:"Map view",onClick:t,clickEvent:o.j.openTripPlanMap,size:c.q.mdLg})}));t.Z=l},841434:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(215671),i=n(143144),o=n(360136),a=n(182963),c=n(661120),l=n(667294);n(411649);function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var s=function(e){(0,o.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.hideDirection,r=e.show,i="boolean"!=typeof r||r?"":"SidebarPanel__".concat(n||"left","Hide");return l.createElement("div",{className:"SidebarPanel d-flex flex-column position-absolute h-100 bg-white ".concat(i)},t)}}]),n}(l.PureComponent);s.displayName="SidebarPanel"},873012:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(215671),i=n(143144),o=n(360136),a=n(182963),c=n(661120),l=n(667294);n(110894);function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var s=function(e){(0,o.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return l.createElement("div",{className:"Sidebar ".concat(t||"")},n)}}]),n}(l.PureComponent);s.displayName="Sidebar"},828747:function(e,t,n){var r=n(193324),i=n(667294),o=n(566897),a=i.memo((function(e){var t=e.isOpen,n=(0,i.useState)(t),a=(0,r.Z)(n,2),c=a[0],l=a[1];return t&&!c&&l(t),c?i.createElement(o.Z,e):null}));t.Z=a},919905:function(e,t,n){var r=n(487462),i=n(145987),o=n(667294),a=n(828747),c=n(623995),l=n(146511),u=n(182785),s=n(222123),f=n(26645),d=n(687167),p=n(743033),h=["isMapOpen","onIsMapOpenChange","isNavSidebarExpanded","className"],v=o.memo((function(e){var t=e.isMapOpen,n=e.onIsMapOpenChange,v=e.isNavSidebarExpanded,m=e.className,y=(0,i.Z)(e,h),g=e.tripPlanType,b=(0,d.vA)(n,!0),k=(0,d.vA)(n,!1),x=(0,c.$_)(),Z=(0,u.i)(g),w=Z.alwaysShowRouteLines,B=Z.onAlwaysShowRouteLinesToggle,S=(0,l.I)();return o.createElement("div",{className:"".concat(m||""," ").concat(S?"d-none d-md-block":"")},o.createElement(s.Z,{isNavSidebarExpanded:!!v,isOpen:t},!x&&o.createElement(a.Z,(0,r.Z)({},y,{onExitMap:k,isOpen:t,alwaysShowRouteLines:w,onAlwaysShowRouteLinesToggle:B,selectedBlock:null,componentsToHide:null}))),o.createElement(p.Z,{in:!t},o.createElement(f.Z,{onClick:b})))}));t.Z=v},182785:function(e,t,n){n.d(t,{i:function(){return c}});var r=n(193324),i=n(667294),o=n(538865),a=n(774756);function c(e){var t=(0,i.useState)(null),n=(0,r.Z)(t,2),c=n[0],l=n[1],u=null!==c?c:e===o.u.story,s=(0,a.U)((function(){return l(!u)}),[u]);return{alwaysShowRouteLines:u,onAlwaysShowRouteLinesToggle:s}}},411168:function(e,t,n){var r=n(215671),i=n(143144),o=n(360136),a=n(182963),c=n(661120);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=l(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){return null}}]),n}(n(667294).PureComponent);u.displayName="SectionQuillFake";var s="undefined"!=typeof window?n(881682).Z:u;t.Z=s},881682:function(e,t,n){n.d(t,{Z:function(){return M}});var r=n(487462),i=n(145987),o=n(789062),a=n(193324),c=n(215671),l=n(143144),u=n(360136),s=n(182963),f=n(661120),d=n(23279),p=n.n(d),h=n(618446),v=n.n(h),m=n(722188),y=n(667294),g=n(522463),b=n.n(g),k=n(820665),x=n.n(k),Z=n(331958),w=n(771167),B=n.n(w),S=n(746073),E=n(468103),C=n(130845),R=n(655179),N=n(964486),I=n(283389),O=n(562237),A=(n(890983),n(814263)),T=n(99337),L=["onChange","value","className"];function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.Z)(e);if(t){var i=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}x().register("modules/autotext",N.Z),x().register("modules/disablePasteImages",T.Z),x().register("formats/link",I.Z,!0);var _={toolbar:[["bold","italic","underline","strike"],["link",{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}]],autotext:{headings:!1},disablePasteImages:{}},K=["bold","italic","underline","strike","link","list","indent","image"],D=I.Z,M=function(e){(0,u.Z)(n,e);var t=P(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e)).reactQuill=null,r.popoverAnchor=y.createRef(),r.getValue=(0,C.Z)((function(e){return(0,m.ZN)(e)})),r.value=function(){return r.getValue(r.props.value)},r.registerQuillRef=function(e){if(r.reactQuill=e,e){var t=e.getEditor(),n=t.getModule("keyboard");delete n.bindings[9],r.props.disableEnter&&delete n.bindings[13][4],t.theme.tooltip.root.querySelector("input[data-link]").dataset.link="Enter/paste a URL",t.on("selection-change",r.handleSelectionChange)}},r.linkRange=null,r.handleSelectionChange=function(e,t,n){var i=r.quill();if(i)if(e&&0===e.length&&"user"===n){var o=i.scroll.descendant(D,e.index),c=(0,a.Z)(o,2),l=c[0],u=c[1];if(l){var s=new Z.e(e.index-u,l.length());r.linkRange=s,r.setState({linkBounds:i.getBounds(s),linkHref:l.domNode.getAttribute("href")})}else r.setLinkNull()}else r.setLinkNull()},r.renderedContent=void 0,r.latestValue=void 0,r.pendingChanges=new(b()),r.flushChanges=function(){var e=r.props.onChange,t=r.quill(),n=r.pendingChanges;r.pendingChanges=new(b()),t&&0!==n.ops.length&&e({contents:t.getContents(),ops:n.ops})},r.getDebouncedFlushChanges=(0,C.Z)((function(e){return p()(r.flushChanges,e?0:1e3,{leading:!1,trailing:!0})})),r.makeDebouncedFlushChanges=function(){return r.getDebouncedFlushChanges(!!r.props.disableDebounce)},r.addPendingChanges=function(e){r.pendingChanges=r.pendingChanges.compose(new(b())({ops:e})),r.makeDebouncedFlushChanges()()},r.handledFirstChange=!1,r.handleChange=function(e,t,n,i){var o=r.props.onChangeImmediate,c=r.latestValue,l=i.getContents();if(r.renderedContent=l,t.ops&&!v()(l.ops,c.ops)){var u=t.ops;if(!l.ops)throw new Error("No ops in react-quill onChange - should never happen: ".concat(JSON.stringify(l)));var s=new(b())(c.ops),f=new(b())(u),d=s.compose(f);if(!v()(d.ops,l.ops)){if(r.handledFirstChange||"api"!==n){var p=r.quill();return void(p&&p.setContents(c))}var h=l.length();Math.abs(f.length()-h)<10&&(u=(new(b())).delete(h).concat(new(b())(l.ops)).ops)}r.handledFirstChange=!0,r.addPendingChanges(u||[]),o&&o(l),r.latestValue=l}if(null!==r.state.linkBounds){var m=r.quill().scroll.descendant(D,i.getSelection().index);(0,a.Z)(m,1)[0]||r.setLinkNull()}},r.handleRemoveLink=function(){var e=r.linkRange,t=r.quill();e&&t&&(t.formatText(e,"link",!1,"user"),r.setLinkNull())},r.handleFocus=function(e){var t=r.props.onFocus,n=r.value(),i=r.quill();(0,R.xb)(n)&&i&&i.setSelection(e.index,e.length);for(var a=arguments.length,c=new Array(a>1?a-1:0),l=1;l<a;l++)c[l-1]=arguments[l];t&&t.apply(void 0,[e].concat((0,o.Z)(c)))},r.lastLinkBounds=void 0,r.state={linkBounds:null,linkHref:null},r.renderedContent=e.value,r.latestValue=e.value,r}return(0,l.Z)(n,[{key:"quill",value:function(){return this.reactQuill&&this.reactQuill.getEditor()}},{key:"setLinkNull",value:function(){this.linkRange=null,this.setState({linkBounds:null})}},{key:"focus",value:function(){this.reactQuill&&this.reactQuill.focus()}},{key:"componentWillUnmount",value:function(){this.flushChanges()}},{key:"componentDidUpdate",value:function(e){var t=this.props.placeholder,n=this.value(),r=this.reactQuill;if(r){var i=r.getEditor();this.props.value===e.value||v()(n.ops,this.renderedContent.ops)||(this.pendingChanges=new(b()),this.latestValue=n,i.setContents(n,"user")),t!==e.placeholder&&(i.root.dataset.placeholder=t)}}},{key:"render",value:function(){var e=this.props,t=(e.onChange,e.value,e.className),n=(0,i.Z)(e,L),o=this.state,a=o.linkBounds,c=o.linkHref;return a&&(this.lastLinkBounds=a),y.createElement("div",{className:"SectionQuillClient position-relative ".concat(t||"")},y.createElement(B(),(0,r.Z)({},n,{ref:this.registerQuillRef,defaultValue:this.value(),theme:"bubble",modules:_,formats:K,onChange:this.handleChange,scrollingContainer:"html",onFocus:this.handleFocus})),y.createElement("div",{ref:this.popoverAnchor,className:"position-absolute invisible",style:this.lastLinkBounds}),this.popoverAnchor.current&&y.createElement(S.Z,{target:this.popoverAnchor.current,isOpen:!!a,placement:"bottom",className:"SectionQuillClient__popover",fade:!1},y.createElement(E.Z,null,y.createElement("div",{className:"d-flex align-items-center"},c&&y.createElement(O.Z,{href:(0,A.G5)(c),className:"minw-0",clickEvent:null},c.substr(0,40),c.length>40&&"…"),y.createElement("button",{className:"btn btn-link p-0 ml-4",type:"button",onClick:this.handleRemoveLink},"Remove")))))}}]),n}(y.PureComponent);M.displayName="SectionQuillClient"},964486:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(522463),i=n.n(r),o=n(814263);function a(e,t){return function(n,r){var i=r.prefix.match(e);if(null===i)return!0;var a=i[0].length,c=n.index-a,l=t.getText(c,a);return t.formatText(c,a,{link:(0,o.G5)(l)},"user"),!0}}function c(e,t){var n=e.keyboard,r=o.sI.join("|"),c=new RegExp("".concat(r,"$"));if(n.addBinding({collapsed:!0,key:" ",prefix:c,handler:a(c,e)}),n.addBinding({key:"k",shortKey:!0,collapsed:!1,handler:function(){e.theme.tooltip.edit()}}),e.clipboard.addMatcher(Node.TEXT_NODE,(function(e){for(var t=new RegExp(r,"g"),n=[],a=e.data.replace(/\n/g," "),c=0,l=t.exec(a);null!==l;)l.index>c&&n.push({insert:a.slice(c,l.index)}),n.push({insert:l[0],attributes:{link:(0,o.G5)(l[0])}}),c=l.index+l[0].length,l=t.exec(a);return c<a.length&&n.push({insert:a.slice(c)}),new(i())(n)})),"object"==typeof t&&t.headings)for(var l=function(t){var r=new RegExp("^".concat("#".repeat(t),"$")),i=t;n.addBinding({collapsed:!0,key:" ",prefix:r,offset:i,handler:function(n){e.formatLine(n.index,1,"header",t,"user"),e.deleteText(n.index-i,i,"user"),e.setSelection(n.index-i,0,"user")}})},u=1;u<=2;u++)l(u)}},99337:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(522463),i=n.n(r),o=n(604222);function a(e){e.clipboard.addMatcher("IMG",(function(e){var t=null;try{var n=new URL(e.src,o.ZP.webPath);"http:"!==n.protocol&&"https:"!==n.protocol||(t=n.toString())}catch(e){}return t?new(i())([{insert:t,attributes:{link:t}}]):new(i())}))}},283389:function(e,t,n){var r=n(215671),i=n(143144),o=n(588301),a=n(360136),c=n(182963),l=n(661120),u=n(820665),s=n.n(u),f=n(847680);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var p=function(e){(0,a.Z)(n,e);var t=d(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"format",value:function(e,t){if(e===this.statics.blotName&&t){var r=n.sanitize(t);this.domNode.setAttribute("href",r)}else(0,o.Z)((0,l.Z)(n.prototype),"format",this).call(this,e,t)}}],[{key:"create",value:function(e){var t=(0,o.Z)((0,l.Z)(n),"create",this).call(this,e),r=n.sanitize(e);return t.setAttribute("href",r),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t.addEventListener("click",f.PF),t}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return function(e,t){var n=document.createElement("a");n.href=e;var r=n.href.slice(0,n.href.indexOf(":"));return t.indexOf(r)>-1}(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),n}(s().import("blots/inline"));p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.Z=p},271343:function(e,t,n){n.d(t,{M:function(){return l}});var r=n(193324),i=n(667294),o=n(745469),a=n(875711),c=n(774756);function l(){var e=(0,i.useState)({safariBottomBarVisible:!0,iPhoneXBottomBarVisible:!0}),t=(0,r.Z)(e,2),n=t[0],a=t[1],l=(0,i.useRef)(0),u=(0,c.U)((function(){var e=window.innerHeight-l.current;0!==l.current&&0!==e&&a((function(t){var n=t.safariBottomBarVisible,r=t.iPhoneXBottomBarVisible;return e>-100&&e<=-70?n=!0:e>-130&&e<=-100?r=!0:e>=70&&e<100?n=!1:e>=100&&e<130&&(r=!1),{safariBottomBarVisible:n,iPhoneXBottomBarVisible:r}})),l.current=window.innerHeight}),[]);return(0,i.useEffect)((function(){u();var e=(0,o.vC)();return e&&e<15?(window.addEventListener("resize",u),function(){return window.removeEventListener("resize",u)}):void 0}),[u]),n}(0,a.y)(l)},606677:function(e,t,n){n.d(t,{L:function(){return o}});var r=n(667294),i=0;function o(e){var t=(0,r.useRef)(!1);function n(e){t.current!==e&&(e?i+=1:i-=1,t.current=e),0===i?document.body.classList.remove("overflow-hidden"):document.body.classList.add("overflow-hidden")}(0,r.useEffect)((function(){return n(e),function(){return n(!1)}}),[e])}},161890:function(e,t,n){n.d(t,{X2:function(){return p},iP:function(){return d},no:function(){return u},qg:function(){return c}});var r=n(115861),i=n(879628),o=n(321043),a=n(950165);function c(e){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n,r,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tripPlanKey,r=t.overallNote,a=t.blocks,e.next=3,(0,i.V1)({url:"/api/tripPlans/".concat(n,"/friendRecommendations"),method:"POST",data:{overallNote:r,blocks:a}});case 3:return c=e.sent,e.abrupt("return",(0,o.Ff)(c));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.V1)({url:"/api/tripPlans/".concat(t,"/friendRecommendations"),method:"GET"});case 2:return n=e.sent,e.abrupt("return",(0,o.Ff)(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.V1)({url:"/api/tripPlans/friendRecommendations/listThanked",method:"POST",data:{ids:t}});case 2:return n=e.sent,e.abrupt("return",(0,o.Ff)(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d=(0,a.Q)((function(e){return f.apply(this,arguments)}));function p(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.V1)({url:"/api/tripPlans/friendRecommendations/".concat(t,"/thank"),method:"POST"});case 2:return n=e.sent,e.abrupt("return",(0,o.Ff)(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},79003:function(e,t,n){n.d(t,{Hb:function(){return b},Q3:function(){return Z},SW:function(){return g},Z_:function(){return S},eU:function(){return x},r:function(){return w},yh:function(){return E}});var r=n(789062),i=n(193324),o=n(187185),a=n.n(o),c=n(669417),l=n(537276),u=n(4868),s=n(639086),f=n(197765),d=n(843179),p=n(620083),h=n(782107),v=n(878927);function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=e.attachments;return"emailId"in e&&e.emailId?{type:h.sf.email,id:e.emailId}:t&&t.length>0?t[0]:null}function b(e,t){var n=[],r=e.sections.findIndex((function(e){return e.type===u.bA.attachments}));if(-1===r){var i=(0,s.xm)();i.blocks=t;var o=(0,f.TN)(u.bA.attachments,e.sections);return[(0,c.QO)((0,l.n)(e,["sections",o]),i)]}var a,d=m(t);try{for(d.s();!(a=d.n()).done;){var p=a.value;n.push((0,c.QO)((0,l.n)(e,["sections",r,"blocks",e.sections[r].blocks.length]),p))}}catch(e){d.e(e)}finally{d.f()}return n}function k(e,t){switch(e.type){case h.sf.file:return t.type===h.sf.file&&e.key===t.key;case h.sf.email:return t.type===h.sf.email&&e.id===t.id;default:throw(0,v.j)(e)}}function x(e,t){return[(0,c.Ic)((0,l.n)(t,["attachments"]),t.attachments,[e])]}function Z(e,t,n){var o,a=[],u=m(e.sections.entries());try{for(u.s();!(o=u.n()).done;){var s,f=(0,i.Z)(o.value,2),d=f[0],v=m(f[1].blocks.entries());try{for(v.s();!(s=v.n()).done;){var y=(0,i.Z)(s.value,2),g=y[0],b=y[1];if(b.id===n){var x,Z=null===(x=b.attachments)||void 0===x?void 0:x.findIndex((function(e){return k(e,t)}));void 0!==Z&&-1!==Z&&(b.type===p.k.attachment?a.push((0,c.vO)((0,l.n)(e,["sections",d,"blocks",g]),b)):b.attachments&&a.push((0,c.vO)([].concat((0,r.Z)((0,l.n)(e,["sections",d,"blocks",g,"attachments"])),(0,r.Z)((0,l.n)(b.attachments,[Z]))),b.attachments[Z]))),t.type===h.sf.email&&"emailId"in b&&t.id===b.emailId&&a.push((0,c.Dy)([].concat((0,r.Z)((0,l.n)(e,["sections",d,"blocks",g])),(0,r.Z)((0,l.n)(b,["emailId"]))),b.emailId))}}}catch(e){v.e(e)}finally{v.f()}}}catch(e){u.e(e)}finally{u.f()}return a}function w(e,t,n){var r=x(t,n),i=(0,d.P)(e.sections,n.id);if(!i)return[];var o=i.sectionIndex,a=i.blockIndex;return(0,c.Vd)((0,l.n)(e,["sections",o,"blocks",a]),r)}var B=[p.k.place,p.k.flight,p.k.rentalCar,p.k.train,p.k.bus];function S(e){return B.includes(e.type)&&(!e.attachments||0===e.attachments.length)}function E(e){var t,n=[],r=m(e);try{for(r.s();!(t=r.n()).done;){var i,o=m(t.value.blocks);try{for(o.s();!(i=o.n()).done;){var c,l,u=m(null!==(c=i.value.attachments)&&void 0!==c?c:[]);try{for(u.s();!(l=u.n()).done;){var s=l.value;n.push(s)}}catch(e){u.e(e)}finally{u.f()}}}catch(e){o.e(e)}finally{o.f()}}}catch(e){r.e(e)}finally{r.f()}return a()(n,k)}},314763:function(e,t,n){function r(e){return e.map((function(e){return e.block}))}n.d(t,{N:function(){return r}})},927254:function(e,t,n){n.d(t,{H8:function(){return O},N1:function(){return A},p1:function(){return S},tg:function(){return B}});var r=n(193324),i=n(132634),o=n(495243),a=n(346391),c=n(69739),l=n(502293),u=n(519501),s=n(520084),f=n(546450),d=n(258012),p=n(544896),h=n(939216),v=n(529695),m=n(556176),y=n(620083),g=n(270425),b=n(4868),k=n(141342),x=n(878927);function Z(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var B={[m.BK.flights]:{icon:c.wK,text:"Flights"},[m.BK.lodging]:{icon:i.by,text:"Lodging"},[m.BK.carRental]:{icon:o.yn,text:"Car rental"},[m.BK.publicTransit]:{icon:d.Dd,text:"Public transit"},[m.BK.food]:{icon:h.fk,text:"Food"},[m.BK.drinks]:{icon:v.zI,text:"Drinks"},[m.BK.sightseeing]:{icon:p.bh,text:"Sightseeing"},[m.BK.activities]:{icon:f.mG,text:"Activities"},[m.BK.shopping]:{icon:u.Di,text:"Shopping"},[m.BK.gas]:{icon:a.q1,text:"Gas"},[m.BK.groceries]:{icon:s.sq,text:"Groceries"},[m.BK.other]:{icon:l.dL,text:"Other"}};function S(e,t,n){switch(n){case b.bA.hotels:return m.BK.lodging;case b.bA.flights:return m.BK.flights;case b.bA.rentalCars:return m.BK.carRental;case b.bA.transit:return m.BK.publicTransit;case b.bA.story:case b.bA.routeOverview:case b.bA.normal:case b.bA.textOnly:case b.bA.attachments:break;default:(0,x.j)(n)}return E(e,t)}function E(e,t){switch(e.type){case y.k.flight:return m.BK.flights;case y.k.place:var n;return e.hotel?m.BK.lodging:O(n=(0,g.NL)(e)?(0,g.c3)(e):e,n.place.placeId in t?t[n.place.placeId]:null);case y.k.rentalCar:return m.BK.carRental;case y.k.train:case y.k.bus:return m.BK.publicTransit;case y.k.story:case y.k.attachment:case y.k.note:case y.k.checklist:return m.BK.other;default:return(0,x.j)(e),m.BK.other}}function C(e,t){var n;t.set(e,(null!==(n=t.get(e))&&void 0!==n?n:0)+1)}function R(e){var t,n=null,i=0,o=Z(e.entries());try{for(o.s();!(t=o.n()).done;){var a=(0,r.Z)(t.value,2),c=a[0],l=a[1];l>i&&(n=c,i=l)}}catch(e){o.e(e)}finally{o.f()}return n}function N(e){for(var t=[{category:m.BK.food,regExp:/food|restaurant|cafe|meal/},{category:m.BK.lodging,regExp:/hotel|lodging|lodge|resort|spa/},{category:m.BK.sightseeing,regExp:/shrine|landmark|site|museum|zoo/},{category:m.BK.flights,regExp:/airport|flight/},{category:m.BK.drinks,regExp:/bar|pub|drinks|tea|winery/},{category:m.BK.shopping,regExp:/mall|shopping|plaza|outlet|store|florist/},{category:m.BK.activities,regExp:/game|play|activity|activities|outdoor|camping/}],n=e.toLowerCase(),r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],c=a.category;a.regExp.test(n)&&C(c,r)}return R(r)}var I={[k.$U.flight]:m.BK.flights,[k.$U.food]:m.BK.food,[k.$U.shopping]:m.BK.shopping,[k.$U.lodging]:m.BK.lodging,[k.$U.general]:m.BK.activities};function O(e,t){var n,r,i=new Map,o=N(e.place.name);o&&C(o,i);var a=(0,k.J9)(e.place.types),c=I[a];if(a!==k.$U.general)return c;C(c,i);var l,u,s=Z(null!==(r=e.place.types)&&void 0!==r?r:[]);try{for(s.s();!(l=s.n()).done;){var f=N(l.value);f&&C(f,i)}}catch(e){s.e(e)}finally{s.f()}if(!t)return null!==(u=R(i))&&void 0!==u?u:m.BK.activities;var d,p=Z(t.categories);try{for(p.s();!(d=p.n()).done;){var h=N(d.value);h&&C(h,i)}}catch(e){p.e(e)}finally{p.f()}return null!==(n=R(i))&&void 0!==n?n:m.BK.activities}function A(e){var t,n,r,i=E(e,{});switch(e.type){case y.k.flight:n=e.depart.airport&&e.arrive.airport?"".concat(e.depart.airport.iata," to ").concat(e.arrive.airport.iata):"",r=e.depart.date||void 0;break;case y.k.bus:case y.k.train:n="".concat(e.depart.place.name," to ").concat(e.arrive.place.name),r=e.depart.date;break;case y.k.rentalCar:n=e.pickUp.place.name,r=e.pickUp.date;break;case y.k.place:n=e.place.name,r=(null===(t=e.hotel)||void 0===t?void 0:t.checkIn)||void 0;break;default:(0,x.j)(e),n=""}return{category:i,description:n,associatedDate:r}}},556176:function(e,t,n){n.d(t,{$k:function(){return u},B0:function(){return s},BK:function(){return r},bg:function(){return l},eS:function(){return o},fI:function(){return i},pH:function(){return c}});var r,i,o,a=n(789062);!function(e){e.flights="flights",e.lodging="lodging",e.carRental="carRental",e.publicTransit="publicTransit",e.food="food",e.drinks="drinks",e.sightseeing="sightseeing",e.activities="activities",e.shopping="shopping",e.gas="gas",e.groceries="groceries",e.other="other"}(r||(r={})),function(e){e.individuals="individuals"}(i||(i={})),function(e){e.everyone="everyone",e.noOne="noOne"}(o||(o={}));var c={type:o.noOne},l=(i.individuals,[].concat((0,a.Z)(Object.values(i)),(0,a.Z)(Object.values(o)))),u={[i.individuals]:"Individuals",[o.noOne]:"Don't split",[o.everyone]:"Everyone"};var s=Object.values(r)},197765:function(e,t,n){n.d(t,{Ak:function(){return O},CG:function(){return _},TN:function(){return P},Xm:function(){return A},Yz:function(){return L},aW:function(){return S}});var r=n(789062),i=n(193324),o=n(112297),a=n.n(o),c=(n(618446),n(189734)),l=n.n(c),u=n(730381),s=n.n(u),f=n(669417),d=n(4868),p=n(639086),h=n(537276),v=n(620083),m=n(867327),y=n(556176),g=n(892958),b=n(927254),k=n(314763);function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){return e.place.place_id===t.place.place_id&&e.hotel&&t.hotel&&K(e.hotel.checkIn,t.hotel.checkIn)&&K(e.hotel.checkOut,t.hotel.checkOut)&&D(e.hotel.travelerNames,t.hotel.travelerNames)&&K(e.hotel.confirmationNumber,t.hotel.confirmationNumber)}function B(e,t){if("place"!==e.type||"place"!==t.type||!e.hotel||!t.hotel)return 0;for(var n=0,r=[[e.hotel.checkIn,t.hotel.checkIn],[e.hotel.checkOut,t.hotel.checkOut]];n<r.length;n++){var o=(0,i.Z)(r[n],2),a=o[0],c=o[1];if((a||"")<(c||""))return-1;if((a||"")>(c||""))return 1}return 0}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[],a=e.sections.findIndex((function(e){return e.type===d.bA.hotels})),c=!1!==n.shouldDeduplicate;if(-1===a){var u,s=(0,p.Q0)(),v=x(t);try{for(v.s();!(u=v.n()).done;){var m=u.value,y=M({itinerary:e,blockWithMoney:m});o.push.apply(o,y)}}catch(e){v.e(e)}finally{v.f()}var g=l()((0,k.N)(t),(function(e){return e.hotel.checkIn}));s.blocks=g;var b=P(d.bA.hotels,e.sections);o.push((0,f.QO)((0,h.n)(e,["sections",b]),s))}else{var Z,S=e.sections[a],E=(0,r.Z)(S.blocks),C=[],R=[],N=x(t);try{var I=function(){var e,t=Z.value,n=!1,r=x(E.entries());try{for(r.s();!(e=r.n()).done;){var o=(0,i.Z)(e.value,2),a=o[0],l=o[1];if(c&&E.find((function(e){return"place"===e.type&&w(e,t.block)}))){n=!0,C.push({index:a,existingBlock:l,blockToReplaceWith:t});break}}}catch(e){r.e(e)}finally{r.f()}n||R.push(t)};for(N.s();!(Z=N.n()).done;)I()}catch(e){N.e(e)}finally{N.f()}for(var O=l()(R,[function(e){return e.block.hotel&&e.block.hotel.checkIn},function(e){return e.block.hotel&&e.block.hotel.checkOut}]),A=0,T=C;A<T.length;A++){var L=T[A],_=L.index,K=L.existingBlock,D=L.blockToReplaceWith,U=(0,f.Ht)((0,h.n)(e,["sections",a,"blocks",_]),K,D.block);o.push(U)}var F,Q=x(O);try{var V=function(){var t=F.value,n=E.findIndex((function(e){return 1===B(e,t.block)})),r=-1===n?E.length:n,i=M({itinerary:e,blockWithMoney:t});o.push.apply(o,[(0,f.QO)((0,h.n)(e,["sections",a,"blocks",r]),t.block)].concat(i)),E.splice(r,0,t.block)};for(Q.s();!(F=Q.n()).done;)V()}catch(e){Q.e(e)}finally{Q.f()}}return o}function E(e){return e&&e.iata}function C(e){return e&&e.iata}function R(e,t){return"flight"===e.type&&"flight"===t.type&&K(e.depart.date,t.depart.date)&&K(e.depart.time,t.depart.time)&&K(e.flightInfo.number,t.flightInfo.number)&&K(C(e.flightInfo.airline),C(t.flightInfo.airline))&&K(E(e.depart.airport),E(t.depart.airport))&&K(E(e.arrive.airport),E(t.arrive.airport))&&D(e.travelerNames,t.travelerNames)&&K(e.confirmationNumber,t.confirmationNumber)}function N(e,t){return e.type===t.type&&("bus"===t.type||"train"===t.type)&&("bus"===e.type||"train"===e.type)&&e.depart.place.place_id===t.depart.place.place_id&&e.arrive.place.place_id===t.arrive.place.place_id&&K(e.depart.date,t.depart.date)&&K(e.depart.time,t.depart.time)&&D(e.travelerNames,t.travelerNames)&&K(e.confirmationNumber,t.confirmationNumber)}function I(e){return void 0===e||0===e.length}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return T({itinerary:e,blocks:t,sectionType:d.bA.flights,makeEmptyTransportationSection:p.Uy,isSameTransportation:R,shouldDeduplicate:n.shouldDeduplicate})}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return T({itinerary:e,blocks:t,sectionType:d.bA.transit,makeEmptyTransportationSection:p.Se,isSameTransportation:N,shouldDeduplicate:n.shouldDeduplicate})}function T(e){var t=e.itinerary,n=e.blocks,o=e.sectionType,a=e.makeEmptyTransportationSection,c=e.isSameTransportation,u=e.shouldDeduplicate,s=[],d=t.sections.findIndex((function(e){return e.type===o})),p=!1!==u,v=l()(n,[function(e){return e.block.depart.date},function(e){return e.block.depart.time}]);if(-1===d){var m,y=a(),g=x(v);try{for(g.s();!(m=g.n()).done;){var b=m.value,Z=M({itinerary:t,blockWithMoney:b});s.push.apply(s,Z)}}catch(e){g.e(e)}finally{g.f()}y.blocks=(0,k.N)(v);var w=P(o,t.sections);s.push((0,f.QO)((0,h.n)(t,["sections",w]),y))}else{var B,S=t.sections[d],E=(0,r.Z)(S.blocks||[]),C=[],R=[],N=x(v);try{var I=function(){var e,t=B.value,n=!1,r=x(E.entries());try{for(r.s();!(e=r.n()).done;){var o=(0,i.Z)(e.value,2),a=o[0],l=o[1];if(p&&E.find((function(e){return c(e,t.block)}))){n=!0,R.push({index:a,existingBlock:l,blockToReplaceWith:t});break}}}catch(e){r.e(e)}finally{r.f()}n||C.push(t)};for(N.s();!(B=N.n()).done;)I()}catch(e){N.e(e)}finally{N.f()}for(var O=0,A=R;O<A.length;O++){var T=A[O],L=T.index,_=T.existingBlock,K=T.blockToReplaceWith,D=(0,f.Ht)((0,h.n)(t,["sections",d,"blocks",L]),_,K.block);s.push(D)}for(var U=function(){var e=Q[F],n=E.findIndex((function(t){return 1===function(e,t){if(("bus"===e.type||"train"===e.type)&&("bus"===t.type||"train"===t.type)||"flight"===e.type&&"flight"===t.type)for(var n=0,r=[[e.depart.date,t.depart.date],[e.depart.time,t.depart.time]];n<r.length;n++){var o=(0,i.Z)(r[n],2),a=o[0],c=o[1];if((a||"")<(c||""))return-1;if((a||"")>(c||""))return 1}return 0}(t,e.block)})),r=-1===n?E.length:n,o=M({itinerary:t,blockWithMoney:e}),a=(0,f.QO)((0,h.n)(t,["sections",d,"blocks",r]),e.block);s.push.apply(s,[a].concat(o)),E.splice(r,0,e.block)},F=0,Q=C;F<Q.length;F++)U()}return s}function L(e,t){var n=e.sections,o=n.findIndex((function(e){return e.type===d.bA.rentalCars}));if(-1===o){var a,c=[],u=P(d.bA.rentalCars,n),s=x(t);try{for(s.s();!(a=s.n()).done;){var v=M({itinerary:e,blockWithMoney:a.value});c.push.apply(c,v)}}catch(e){s.e(e)}finally{s.f()}var m=(0,p.Jm)();return m.blocks=(0,k.N)(t),c.push((0,f.QO)((0,h.n)(e,["sections",u]),m)),c}var y,g=e.sections[o].blocks.map((function(e){return{type:"existing",block:{block:e}}})),b=t.map((function(e){return{type:"new",block:e}})),Z=[],w=x(l()([].concat((0,r.Z)(g),(0,r.Z)(b)),[function(e){return e.block.block.pickUp.date},function(e){return e.block.block.pickUp.time}]).entries());try{for(w.s();!(y=w.n()).done;){var B=(0,i.Z)(y.value,2),S=B[0],E=B[1];if("new"===E.type){var C=M({itinerary:e,blockWithMoney:E.block});Z.push.apply(Z,[(0,f.QO)((0,h.n)(e,["sections",o,"blocks",S]),E.block.block)].concat(C))}}}catch(e){w.e(e)}finally{w.f()}return Z}function P(e,t){var n=d.dt.indexOf(e);if(-1===n)throw new Error("sectionIndexToAddSectionType: couldn't find indexInOrder for ".concat(e,";\n      consider adding the type to sectionTypesOrder."));var r=new Set(d.dt.slice(n+1)),i=t.findIndex((function(e){return r.has(e.type)}));return-1!==i?i:t.length}function _(e,t,n){var r,i=t.filter((function(t){return t.type===e})),o={[m.f.bus]:v.k.bus,[m.f.train]:v.k.train};return r=e===d.bA.transit?a()(i.map((function(e){return e.blocks.filter((function(e){return n in o&&e.type===o[n]})).length}))):a()(i.map((function(e){return e.blocks.length}))),{firstSectionId:i.length?i[0].id:null,blockCount:r}}function K(e,t){return!e||e===t}function D(e,t){var n=e&&new Set(e.map((function(e){return e.toLowerCase()})));return I(e)||!!n&&!!e&&!!t&&t.length===e.length&&t.every((function(e){return n.has(e.toLowerCase())}))}function M(e){var t=e.itinerary,n=e.blockWithMoney,r=n.block,i=r.id,o=r.addedBy,a=n.money;if(!a||"unknown"===o.type)return[];var c=(0,b.N1)(n.block),l=c.category,u=c.description,d=c.associatedDate,p={id:(0,g.u)(),category:l,amount:a,description:u,date:s().utc().format("YYYY-MM-DD"),blockId:i,paidByUserId:o.userId,paidByUser:{type:"registered",id:o.userId},splitWith:{type:y.fI.individuals,users:[]},associatedDate:d};return[(0,f.QO)((0,h.n)(t,["budget","expenses",t.budget.expenses.length]),p)]}},867327:function(e,t,n){var r;n.d(t,{f:function(){return r}}),function(e){e.hotel="hotel",e.flight="flight",e.rentalCar="rentalCar",e.train="train",e.bus="bus",e.attachment="attachment"}(r||(r={}))},497277:function(e,t,n){n.d(t,{i:function(){return a}});var r=n(667294),i=n(79003),o=n(774756);function a(e){var t=e.onClick,n=e.block,a=n.id,c=(0,r.useMemo)((function(){return(0,i.SW)(n)}),[n]),l=(0,o.U)((function(){t&&c&&t(c,a)}),[a,c,t]);return t&&(0,i.SW)(n)?l:null}},181750:function(){},688088:function(){},646054:function(){},890983:function(){},110894:function(){},411649:function(){}}]);