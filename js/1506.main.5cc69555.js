"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[1506],{353605:function(e,t,n){n.d(t,{O:function(){return o}});var o,r=n(789062),i=n(193324),a=n(667294),l=n(294184),s=n.n(l),c=n(862056),u=n(262812),d=n(774756),f=(n(113923),n(878927));!function(e){e.static="static",e.fixedExpanding="fixedExpanding",e.fixedExpanded="fixedExpanded",e.fixedContracting="fixedContracting"}(o||(o={}));var p=a.memo((function(e){var t=e.isOpen,n=e.children,l=e.className,p=e.style,g=e.onClose,h=(0,u.x)(t),m=!!e.hasNavbar,v=(0,a.useRef)(null),w=(0,a.useState)({state:t?o.fixedExpanded:o.static}),x=(0,i.Z)(w,2),y=x[0],E=x[1],F=(0,u.x)(y);(0,a.useEffect)((function(){if(v.current){var e=v.current.getBoundingClientRect(),n=e.top,r=e.left,i=e.width,a=e.height,l=(0,c._U)(),s=(0,c.mP)();if(null==l||null==s)return;var u={top:n,left:r,right:l-r-i,bottom:s-n-a};if(u.bottom>s){var d=u.bottom-s;u.top+=d,u.bottom-=d}else if(u.top>s){var f=u.top-s;u.bottom+=f,u.top-=f}else if(u.left>l){var p=u.left-s;u.right+=p,u.left-=p}else if(u.right>l){var g=u.right-s;u.left+=g,u.right-=g}t&&F.current.state!==o.fixedExpanded?E({state:o.fixedExpanding,staticBounds:u}):t||F.current.state===o.static||(E({state:o.fixedContracting,staticBounds:u}),setTimeout((function(){h.current||E({state:o.static})}),500))}}),[t,h,F]),(0,a.useEffect)((function(){y.state===o.fixedExpanding&&setTimeout((function(){E({state:o.fixedExpanded})}),20)}),[y]);var b,k=(0,d.U)((function(){y.state===o.fixedContracting&&E({state:o.static})}),[y]),Z=y.state!==o.static,_=y.state===o.fixedExpanded,L=[];switch(y.state){case o.static:b=p,L.push.apply(L,(0,r.Z)((l||"").split(" ")));break;case o.fixedExpanding:case o.fixedContracting:b=y.staticBounds,L.push("position-fixed");break;case o.fixedExpanded:L.push("position-fixed");break;default:throw(0,f.j)(y)}var R=(0,d.U)((function(e){"Escape"===e.key&&g()}),[g]);return(0,a.useEffect)((function(){return t&&"undefined"!=typeof document&&document.body?(document.body.addEventListener("keydown",R),function(){return document.body.removeEventListener("keydown",R)}):function(){}}),[t,R]),(0,a.useEffect)((function(){return"undefined"!=typeof document&&document.body&&(t?document.body.classList.add("FullScreenExpandingElement__bodyOpen"):document.body.classList.remove("FullScreenExpandingElement__bodyOpen")),function(){"undefined"!=typeof document&&document.body&&document.body.classList.remove("FullScreenExpandingElement__bodyOpen")}}),[t]),a.createElement(a.Fragment,null,a.createElement("div",{key:0,className:s()("FullScreenExpandingElement",{FullScreenExpandingElement__expanded:_,FullScreenExpandingElement__expandedWithNavbar:_&&m},L),ref:Z?void 0:v,style:b,onTransitionEnd:k},n(y.state)),Z&&a.createElement("div",{ref:v,key:1,className:l,style:p}))}));t.Z=p},61323:function(e,t,n){var o=n(115861),r=n(215671),i=n(143144),a=n(360136),l=n(182963),s=n(661120),c=n(667294),u=n(130845),d=n(546922),f=n(116439),p=n(950250),g=n(337144);n(374811);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return(0,l.Z)(this,n)}}var m=function(e){(0,a.Z)(n,e);var t=h(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))).state={initialLoaded:!1},e.getEventProperties=(0,u.Z)((function(e){return{followedUserId:e}})),e.eventProperties=function(){return e.getEventProperties(e.props.followedUserId)},e.handleToggleFollow=(0,o.Z)(regeneratorRuntime.mark((function t(){var n,o,r,i,a,l,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,o=n.onToggleFollowing,r=n.followedUserName,i=n.auth,a=n.onFollow,l=n.onUnfollow,s=n.isFollowing,i.user){t.next=4;break}return t.next=4,i.showLoginModal("register",{loginFormTo:"to follow ".concat(r||"this user")}).success;case 4:s&&l&&l(),!s&&a&&a(),o();case 7:case"end":return t.stop()}}),t)}))),e}return(0,i.Z)(n,[{key:"componentDidUpdate",value:function(){this.state.initialLoaded||this.props.isFollowingLoading||this.setState({initialLoaded:!0})}},{key:"render",value:function(){var e=this.props,t=e.isFollowing,n=e.isFollowingLoading,o=e.size,r=e.className,i=this.state.initialLoaded;return c.createElement(d.ZP,{className:r,label:i?t?"Following":"Follow":"Loading",color:!i||t?"light-brand":"brand",loading:!i||n,onClick:this.handleToggleFollow,clickEvent:p.j.tapFollow,eventProperties:this.eventProperties(),size:o})}}]),n}(c.PureComponent);m.displayName="FollowButton",t.Z=(0,f.e)((0,g.fm)(m))},116439:function(e,t,n){n.d(t,{e:function(){return E}});var o=n(487462),r=n(145987),i=n(115861),a=n(215671),l=n(143144),s=n(360136),c=n(182963),u=n(661120),d=n(667294),f=n(380955),p=n(337144),g=n(35931),h=n(950250),m=n(825615),v=n(355437),w=n(592234),x=["followedUserId","forwardedRef","auth"];function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,u.Z)(e);if(t){var r=(0,u.Z)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return(0,c.Z)(this,n)}}function E(e){var t,n=(0,f.Pi)(t=function(t){(0,s.Z)(c,t);var n=y(c);function c(){var e;(0,a.Z)(this,c);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=n.call.apply(n,[this].concat(o))).state={isFollowing:!1,loading:!0,error:null},e.loadFollowingAuthor=(0,i.Z)(regeneratorRuntime.mark((function t(){var n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,o=n.followedUserId,n.auth.user){t.next=4;break}return e.setState({isFollowing:!1,loading:!1}),t.abrupt("return");case 4:return e.setState({loading:!0}),t.prev=5,t.next=8,(0,g.QS)(o);case 8:r=t.sent,e.setState({isFollowing:r,loading:!1}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),e.setState({loading:!1}),(0,w.C)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,12]])}))),e.handleFollowClick=(0,i.Z)(regeneratorRuntime.mark((function t(){var n,o,r,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,o=n.followedUserId,r=n.auth.user,i=e.state.isFollowing,r){t.next=4;break}return t.abrupt("return");case 4:return a=!i,(0,m.L9)(h.j.tapFollow,{toFollowing:a}),e.setState({loading:!0}),t.prev=7,t.next=10,(0,g.Cz)(a,o);case 10:e.setState({isFollowing:a,loading:!1}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),e.setState({error:t.t0.message,loading:!1});case 16:case"end":return t.stop()}}),t,null,[[7,13]])}))),e}return(0,l.Z)(c,[{key:"componentDidMount",value:function(){this.loadFollowingAuthor()}},{key:"componentDidUpdate",value:function(e){e.followedUserId!==this.props.followedUserId&&this.loadFollowingAuthor()}},{key:"render",value:function(){var t=this.props,n=t.followedUserId,i=t.forwardedRef,a=t.auth,l=(0,r.Z)(t,x),s=this.state,c=s.isFollowing,u=s.loading,f=s.error;return a.user&&n===a.user.id?null:d.createElement(e,(0,o.Z)({ref:i},l,{isFollowing:c,isFollowingLoading:u,followedUserId:n,onToggleFollowing:this.handleFollowClick,toggleFollowingError:f}))}}]),c}(d.PureComponent))||t;n.displayName="WithUserFollowed";var c=(0,p.fm)(n);return(0,v.V)({HOC:c,OriginalComponent:e})}},374811:function(){},113923:function(){}}]);