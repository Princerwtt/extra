"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3526],{248893:function(e,t,n){var r=n(487462),o=n(115861),a=n(215671),c=n(143144),i=n(360136),u=n(182963),s=n(661120),l=n(667294),m=n(722188),f=n(655179),p=n(321043),d=n(311334),h=n(767131),v=n(337144);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var o=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var Z=function(e){(0,i.Z)(n,e);var t=y(n);function n(e){var r;(0,a.Z)(this,n),(r=t.call(this,e)).commentFormInnerRef=l.createRef(),r.focus=function(){r.commentFormInnerRef.current&&r.commentFormInnerRef.current.focus()},r.handlePostComment=(0,o.Z)(regeneratorRuntime.mark((function e(){var t,n,o,a,c,i,u,s,l,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props,n=t.onPosted,o=t.tripPlanKey,a=t.parentId,c=t.commentsStore,i=t.comment,u=t.auth,s=r.state.text,l=u.user,m=u.showLoginModal,l){e.next=7;break}return e.next=6,m("register",{loginFormTo:i?"to edit this comment":"to leave a comment on this guide"}).success;case 6:return e.abrupt("return");case 7:if(r.setState({loading:!0}),e.prev=8,!i){e.next=14;break}return e.next=12,c.editComment(i.id,s);case 12:e.next=16;break;case 14:return e.next=16,c.postComment(o,s,a);case 16:r.setState({loading:!1,text:(0,f.z_)()}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),r.setState({loading:!1,error:(0,p.Vx)(e.t0),text:(0,f.z_)()});case 22:n&&n();case 23:case"end":return e.stop()}}),e,null,[[8,19]])}))),r.handleChange=function(e){var t=e.contents;r.setState({text:t})};var c=r.props.comment;return r.state={loading:!1,error:null,text:(0,m.ZN)(c&&c.text)||(0,f.z_)()},r}return(0,c.Z)(n,[{key:"render",value:function(){var e=this.props.auth;return l.createElement(d.Z,(0,r.Z)({ref:this.commentFormInnerRef},this.props,this.state,{user:e.user||null,onPost:this.handlePostComment,onTextChange:this.handleChange}))}}]),n}(l.PureComponent);Z.displayName="CommentForm",t.Z=(0,v.fm)((0,h.mP)(Z))},311334:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(215671),o=n(143144),a=n(360136),c=n(182963),i=n(661120),u=n(667294),s=n(281415),l=n(411168),m=n(655179),f=n(546922),p=n(950250),d=n(446830),h=n(55977);n(993350);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var o=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var y=function(e){(0,a.Z)(n,e);var t=v(n);function n(){var e;(0,r.Z)(this,n);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).quill=u.createRef(),e.focus=function(){e.quill.current&&e.quill.current.focus()},e}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.className,r=e.loading,o=e.parentId,a=e.error,c=e.hideUserBubble,i=e.onBlur,v=e.onTextChange,y=e.onPost,Z=e.text;return u.createElement(u.Fragment,null,u.createElement("div",{className:"".concat(n||""," d-flex align-items-center")},!c&&u.createElement(s.Z,{name:t?t.name:null,username:null,profilePictureKey:t?t.profilePictureKey:null,size:"md",className:"mr-3",showProfileProBadge:!1}),u.createElement("div",{className:"CommentFormInner__textbox d-flex align-items-center py-1"},u.createElement("div",{className:"CommentFormInner__quill"},u.createElement(l.Z,{ref:this.quill,onBlur:i,value:Z,onChange:v,placeholder:"Ask a question or share your thoughts!",disableDebounce:!0})),u.createElement("div",{className:"CommentFormInner__buttonContainer ml-3 flex-shrink-0 text-center"},u.createElement(f.ZP,{label:r?"":"Post",color:"flat-primary",className:"CommentFormInner__button",onClick:y,loading:r,clickEvent:p.j.postComment,eventProperties:{parentId:o},disabled:(0,m.Qc)(Z),size:h.q.mdLg})))),a&&u.createElement("div",{className:"my-2"},u.createElement(d.Z,{response:a})))}}]),n}(u.PureComponent);y.displayName="CommentFormInner"},809924:function(e,t,n){var r=n(487462),o=n(115861),a=n(215671),c=n(143144),i=n(360136),u=n(182963),s=n(661120),l=n(667294),m=n(794922),f=n(337144),p=n(672643),d=n(321043),h=n(767131);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var o=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var y=function(e){(0,i.Z)(n,e);var t=v(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={error:null},e.handleDeleteComment=(0,o.Z)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.comment,o=n.commentsStore,t.prev=1,t.next=4,o.deleteComment(r.id);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),e.setState({error:(0,d.Vx)(t.t0)});case 9:case"end":return t.stop()}}),t,null,[[1,6]])}))),e.handleToggleVote=(0,o.Z)(regeneratorRuntime.mark((function t(){var n,r,o,a,c,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.comment,o=n.auth,a=n.commentsStore,c=o.user,i=o.showLoginModal,c){t.next=6;break}return t.next=5,i("register",{loginFormTo:"to like this comment"}).success;case 5:return t.abrupt("return");case 6:return t.prev=6,t.next=9,a.toggleVote(r.id,r.voteDirection===p.Al.up?null:p.Al.up);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),e.setState({error:(0,d.Vx)(t.t0)});case 14:case"end":return t.stop()}}),t,null,[[6,11]])}))),e}return(0,c.Z)(n,[{key:"render",value:function(){var e=this.state.error;return l.createElement(m.Z,(0,r.Z)({},this.props,{onDelete:this.handleDeleteComment,onToggleVote:this.handleToggleVote,error:e}))}}]),n}(l.PureComponent);y.displayName="CommentItem",t.Z=(0,h.mP)((0,f.fm)(y))},794922:function(e,t,n){var r=n(115861),o=n(215671),a=n(143144),c=n(360136),i=n(182963),u=n(661120),s=n(667294),l=n(294184),m=n.n(l),f=n(730381),p=n.n(f),d=n(686704),h=n(465497),v=n(698227),y=n(120627),Z=n(847680),g=n(80275),R=n(607371),w=n(142619),C=n(927080),x=n(281415),E=n(60927),b=n(672643),P=n(546922),I=n(950250),k=n(337144),F=n(505289),N=n(996684),D=n(446830),_=n(248893),O=n(839483),T=n(65506),V=n(55977),S=(n(9742),n(416645));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var B=function(e){(0,c.Z)(n,e);var t=A(n);function n(){var e;(0,o.Z)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={showCommentReplyForm:!1,showCommentMenu:!1,showCommentEditForm:!1},e.commentEditFormRef=s.createRef(),e.commentReplyFormRef=s.createRef(),e.handleShowEditCommentForm=function(){e.setState({showCommentEditForm:!0}),setTimeout((function(){e.commentEditFormRef.current&&e.commentEditFormRef.current.focus()}),0)},e.handleShowReplyForm=(0,r.Z)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.auth,r=n.user,o=n.showLoginModal,r){t.next=6;break}return t.next=5,o("register",{loginFormTo:"to reply this comment"}).success;case 5:return t.abrupt("return");case 6:e.setState({showCommentReplyForm:!0}),setTimeout((function(){e.commentReplyFormRef.current&&e.commentReplyFormRef.current.focus()}),0);case 8:case"end":return t.stop()}}),t)}))),e.renderRelativeTime=function(){var t=e.props.comment.createdAt;return s.createElement("span",{className:"text-muted ml-2"},p()(t).fromNow())},e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tripPlanKey,n=e.comment,r=e.onDelete,o=e.onToggleVote,a=e.auth,c=e.error,i=this.state,u=i.showCommentReplyForm,l=i.showCommentMenu,f=i.showCommentEditForm,p=n.author,k=n.text,A=n.upvotes,B=n.deletedAt,L=n.voteDirection,j=a&&a.user&&n.author.id===a.user.id;return k.ops&&k.ops.length>0&&s.createElement("div",{className:"d-flex"},s.createElement(x.Z,{name:p.name,username:p.username,profilePictureKey:p.profilePictureKey,size:"md",showProfileProBadge:!1}),s.createElement("div",{className:"CommentItemInner__container ml-3"},s.createElement("div",{className:"CommentItemInner__header d-flex"},s.createElement(T.Z,{className:"font-weight-bold",user:p}),this.renderRelativeTime(),n.editedAt&&s.createElement("span",{className:"text-muted ml-2"},"(edited)"),j&&!B&&s.createElement("div",{className:"CommentItemInner__dropdown"},s.createElement(d.Z,{direction:"down",isOpen:l,toggle:(0,Z.ZN)(this,"showCommentMenu")},s.createElement(h.Z,{tag:"div"},s.createElement(P.ZP,{faIcon:g.cN,color:"flat",size:V.q.sm,onClick:K,clickEvent:null,className:"py-0"})),s.createElement(F.Z,{right:!0},s.createElement(v.Z,{onClick:this.handleShowEditCommentForm},s.createElement("span",{className:"mr-3"},s.createElement(N.Z,{fixedWidth:!0,icon:R.Iw})),"Edit"),s.createElement(v.Z,{onClick:r},s.createElement("span",{className:"mr-3"},s.createElement(N.Z,{fixedWidth:!0,icon:w.$})),"Delete"))))),B?s.createElement(s.Fragment,null,s.createElement("div",{className:"text-muted font-italic mb-3"},"This comment has been removed by the user"),this.props.children):s.createElement(s.Fragment,null,f?s.createElement("div",{className:"my-1"},s.createElement(_.Z,{ref:this.commentEditFormRef,onBlur:(0,Z.IW)(this,"showCommentEditForm",!1),tripPlanKey:t,parentId:n.parentId,comment:n,onPosted:(0,Z.IW)(this,"showCommentEditForm",!1),hideUserBubble:!0})):s.createElement(E.Z,{ops:k.ops}),s.createElement("div",{className:"d-flex align-items-center mb-2"},s.createElement(O.Z,{commentId:n.id,voteDirection:L,userId:a.user&&a.user.id||null},s.createElement(P.ZP,{label:A||void 0,labelTextClassName:"m-1",faIcon:C.u8,faIconProps:L&&L===b.Al.up?{color:S.UQ}:{color:S.pP},color:"flat",onClick:o,className:m()("CommentItemInner__button p-0",{CommentItemInner__upvoted:!!L}),clickEvent:I.j.clickUpvoteComment})),!n.parentId&&s.createElement(P.ZP,{label:"Reply",color:"flat",onClick:this.handleShowReplyForm,className:"CommentItemInner__button p-0 ml-3",clickEvent:I.j.clickReplyComment})),c&&s.createElement("div",{className:"mb-3"},s.createElement(D.Z,{response:c})),s.createElement(y.Z,{isOpen:u},s.createElement("div",{className:"mb-4"},s.createElement(_.Z,{ref:this.commentReplyFormRef,onBlur:(0,Z.IW)(this,"showCommentReplyForm",!1),tripPlanKey:t,parentId:n.parentId||n.id,onPosted:(0,Z.IW)(this,"showCommentReplyForm",!1)}))),this.props.children)))}}]),n}(s.PureComponent);B.displayName="CommentItemInner";var K=function(){};t.Z=(0,k.fm)(B)},655615:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(487462),o=n(215671),a=n(143144),c=n(360136),i=n(182963),u=n(661120),s=n(667294),l=n(672643),m=n(809924);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var p=function(e){(0,c.Z)(n,e);var t=f(n);function n(){var e;(0,o.Z)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).renderCommentReplies=function(){return e.props.replies.map((function(t){return s.createElement(m.Z,(0,r.Z)({key:t.id},e.props,{comment:t}))}))},e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.comment,n=e.replies;return(0,l.bV)(t,n)&&s.createElement(m.Z,this.props,this.renderCommentReplies())}}]),n}(s.PureComponent);p.displayName="CommentThread"},723526:function(e,t,n){var r,o=n(215671),a=n(143144),c=n(360136),i=n(182963),u=n(661120),s=n(667294),l=n(380955),m=n(648583),f=n(767131);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var d=[],h=(0,l.Pi)(r=function(e){(0,c.Z)(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){e.tripPlanKey!==this.props.tripPlanKey&&this.loadData()}},{key:"loadData",value:function(){var e=this.props,t=e.commentsStore,n=e.tripPlanKey;t.loadComments(n)}},{key:"render",value:function(){var e=this.props,t=e.tripPlanKey,n=e.commentsStore,r=n.data,o=n.loading;return s.createElement(m.Z,{tripPlanKey:t,loading:o,comments:r||d})}}]),n}(s.Component))||r;h.displayName="CommentsList",t.Z=(0,f.mP)(h)},648583:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(215671),o=n(143144),a=n(360136),c=n(182963),i=n(661120),u=n(667294),s=n(294184),l=n.n(s),m=n(130845),f=n(672643),p=n(655615),d=n(414070),h=n(248893);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var o=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var y=function(e){(0,a.Z)(n,e);var t=v(n);function n(){var e;(0,r.Z)(this,n);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).getParentComments=(0,m.Z)(f.a3),e.parentComments=function(){return e.getParentComments(e.props.comments)},e.renderCommentThreads=function(){var t=e.props,n=t.comments,r=t.tripPlanKey;return e.parentComments().map((function(e){var t=(0,f.fx)(e,n);return u.createElement(p.Z,{key:e.id,tripPlanKey:r,comment:e,replies:t})}))},e}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.comments,r=e.tripPlanKey;return t?u.createElement(d.Z,null):u.createElement("div",{className:l()({"pb-5":n.length<=0})},u.createElement("div",{className:"mb-4"},u.createElement(h.Z,{tripPlanKey:r,parentId:null})),this.renderCommentThreads())}}]),n}(u.PureComponent);y.displayName="CommentsListInner"},839483:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(115861),o=n(215671),a=n(143144),c=n(360136),i=n(182963),u=n(661120),s=n(618446),l=n.n(s),m=n(667294),f=n(847680),p=n(897394),d=n(414070),h=n(657324);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var y=function(e){(0,c.Z)(i,e);var t,n=v(i);function i(){var e;(0,o.Z)(this,i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r))).randomId=Math.floor(1e9*Math.random()),e.gripId="CommentVotersTooltip__grip".concat(e.randomId),e.state={showVotersTooltip:!1,loading:!1,voters:[]},e.lastFetchedCommentId=null,e.renderVoters=function(){var t=e.props.userId;return e.state.voters.map((function(e){return m.createElement("div",{key:e.id},e.name||e.username," ",t===e.id&&"(You)")}))},e}return(0,a.Z)(i,[{key:"componentDidMount",value:function(){this.maybeLoadCommentVoters(null)}},{key:"componentDidUpdate",value:function(e){this.maybeLoadCommentVoters(e)}},{key:"maybeLoadCommentVoters",value:(t=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.commentId,!(!this.state.showVotersTooltip||l()(n,this.lastFetchedCommentId)&&t&&t.voteDirection===this.props.voteDirection)){e.next=4;break}return e.abrupt("return");case 4:return this.lastFetchedCommentId=n,this.setState({loading:!0,voters:[]}),e.prev=6,e.next=9,(0,h.Y)(n);case 9:r=e.sent,this.setState({loading:!1,voters:r}),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(6),this.setState({loading:!1}),e.t0;case 17:case"end":return e.stop()}}),e,this,[[6,13]])}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.showVotersTooltip,n=e.loading,r=e.voters;return m.createElement("span",{id:this.gripId,className:"user-select-none",onMouseEnter:(0,f.IW)(this,"showVotersTooltip",!0),onMouseLeave:(0,f.IW)(this,"showVotersTooltip",!1)},this.props.children,(n||r.length>0)&&m.createElement(p.Z,{target:this.gripId,isOpen:t},n?m.createElement(d.Z,{size:"sm"}):m.createElement("div",{className:"text-left"},m.createElement("div",{className:"font-weight-bold"},"Liked by"),this.renderVoters())))}}]),i}(m.PureComponent);y.displayName="CommentVotersTooltip"},657324:function(e,t,n){n.d(t,{DF:function(){return f},DV:function(){return c},Pi:function(){return u},Y:function(){return v},YF:function(){return d},bj:function(){return l}});var r=n(115861),o=n(321043),a=n(879628);function c(e){return i.apply(this,arguments)}function i(){return(i=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.V1)({url:"/api/tripPlans/".concat(t,"/comments"),method:"GET"});case 2:return n=e.sent,e.abrupt("return",(0,o.Ff)(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t,n){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(regeneratorRuntime.mark((function e(t,n,r){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.V1)({url:"/api/tripPlans/".concat(t,"/comments"),method:"POST",data:{parentId:n,text:r}});case 2:return c=e.sent,e.abrupt("return",(0,o.Ff)(c));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commentId,r=t.direction,e.next=3,(0,a.V1)({url:"/api/comments/".concat(n,"/vote/").concat(r),method:"POST"});case 3:return c=e.sent,e.abrupt("return",(0,o.Ff)(c));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commentId,r=t.text,e.next=3,(0,a.V1)({url:"/api/comments/".concat(n),data:{text:r},method:"POST"});case 3:return c=e.sent,e.abrupt("return",(0,o.Ff)(c));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.V1)({url:"/api/comments/".concat(t),method:"DELETE"});case 2:return n=e.sent,e.abrupt("return",(0,o.Ff)(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.V1)({url:"/api/comments/".concat(t,"/voters"),method:"GET"});case 2:return n=e.sent,e.abrupt("return",(0,o.Ff)(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},672643:function(e,t,n){var r;n.d(t,{Al:function(){return r},a3:function(){return a},bV:function(){return c},fx:function(){return o}}),function(e){e.up="up",e.down="down"}(r||(r={}));function o(e,t){return t.filter((function(t){return t.parentId===e.id&&!t.deletedAt})).sort((function(e,t){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()}))}function a(e){return e.filter((function(e){return!e.parentId})).sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}))}function c(e,t){return!e.deletedAt||!!e.deletedAt&&0!==t.length}},767131:function(e,t,n){n.d(t,{mP:function(){return _}});var r,o,a,c,i,u,s=n(204942),l=n(789062),m=n(115861),f=n(843269),p=n(143144),d=n(215671),h=n(497326),v=n(360136),y=n(182963),Z=n(661120),g=n(753229),R=n(722188),w=n(730381),C=n.n(w),x=n(857271),E=n(657324),b=n(655179),P=n(787896);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Z.Z)(e);if(t){var o=(0,Z.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,y.Z)(this,n)}}var N=(r=function(e){(0,v.Z)(n,e);var t=F(n);function n(){var e;(0,d.Z)(this,n);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s)),(0,f.Z)(e,"loadComments",o,(0,h.Z)(e)),(0,f.Z)(e,"postComment",a,(0,h.Z)(e)),(0,f.Z)(e,"deleteComment",c,(0,h.Z)(e)),(0,f.Z)(e,"editComment",i,(0,h.Z)(e)),(0,f.Z)(e,"toggleVote",u,(0,h.Z)(e)),e}return(0,p.Z)(n)}(x.Z),o=(0,g.Z)(r.prototype,"loadComments",[R.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,m.Z)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.load(n,(function(){return(0,E.DV)(n)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),a=(0,g.Z)(r.prototype,"postComment",[R.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,m.Z)(regeneratorRuntime.mark((function t(n,r,o){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,b.Qc)(r)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,E.Pi)(n,o,r);case 4:a=t.sent,e.store.data&&(e.store.data=[].concat((0,l.Z)(e.store.data),[a]));case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}}),c=(0,g.Z)(r.prototype,"deleteComment",[R.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,m.Z)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,E.YF)(n);case 2:e.store.data&&(e.store.data=e.store.data.map((function(e){return e.id===n?k(k({},e),{},{deletedAt:C()().format()}):e})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),i=(0,g.Z)(r.prototype,"editComment",[R.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,m.Z)(regeneratorRuntime.mark((function t(n,r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,E.DF)({commentId:n,text:r});case 2:o=t.sent,e.store.data&&(e.store.data=e.store.data.map((function(e){return e.id===n?o:e})));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),u=(0,g.Z)(r.prototype,"toggleVote",[R.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,m.Z)(regeneratorRuntime.mark((function t(n,r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,E.bj)({commentId:n,direction:r});case 2:o=t.sent,e.store.data&&(e.store.data=e.store.data.map((function(e){return e.id===n?o:e})));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),r),D=(0,P.m)("commentsStore",N),_=(D.useStore,D.withStore)},993350:function(){},9742:function(){}}]);